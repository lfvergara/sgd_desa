<!-- Chart.js -->
<script src="{theme_path}/js/Chart.js"></script>
<div class="container">
	<div class="starter-template">
		<div class="page-header"><h1>{titulo}</h1></div>
    <div class="col-lg-12">
      {alert_respuestas_pendientes}
    </div>
    <div class="col-lg-9" id="div_listados">
      <div class="panel panel-info">
        <div class="panel-heading"><h4>Foros Pendientes</h4></div>
        <div class="panel-body">
          <table id="pendientes" class="table table-striped table-hover ">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Foro</th>
                <th>Contenido</th>
                <th>Matriculado</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {tbl_pendientes}
            </tbody>
          </table>
        </div>
      </div>
        
      <div class="panel panel-info">
        <div class="panel-heading"><h4>Foros Activos</h4></div>
        <div class="panel-body">
          <table id="activos" class="table table-striped table-hover ">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Foro</th>
                <th>Contenido</th>
                <th>Matriculado</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {tbl_activos}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="col-lg-9" id="div_administrarforo" style="display: none;"></div>
    <div class="col-lg-3">
      <div class="col-md-6">
        <h5>PENDIENTES</h5>
        <span class="badge badge-pill badge-danger" style="font-size: 30px; background-color: #E74C3C; width: 100%;">{cant_pendientes}</span>
        <hr>
      </div>
      <div class="col-md-6">
        <h5>ACTIVOS</h5>
        <span class="badge badge-pill badge-danger" style="font-size: 30px; background-color: #E74C3C; width: 100%;">{cant_activos}</span>
        <hr>
      </div>
      <div class="col-md-6">
        <h5>CERRADOS</h5>
        <span class="badge badge-pill badge-danger" style="font-size: 30px; background-color: #E74C3C; width: 100%;">{cant_cerrados}</span>
        <hr>
      </div>
      <div class="col-md-6">
        <h5>RECHAZADOS</h5>
        <span class="badge badge-pill badge-danger" style="font-size: 30px; background-color: #E74C3C; width: 100%;">{cant_rechazados}</span>
        <hr>
      </div>
      <div class="col-md-12" style="padding-left: 0px;">
        <div class="panel-body">              
            <div class="panel panel-info">
              <div class="panel-body" style="text-align: center;">
                <div id="canvas-holder">
                  <center><canvas id="chartPieID" width="200" height="200"></canvas></center>
                </div>
              </div>
            </div>              
        </div>
      </div>
      <button type="button" class="btn btn-primary btn-xs" onclick="location.href='/{app_name}/foros/administrar_cerrados'" style="width: 100%; margin-top: 5px;"> <i class="fa fa-table"></i> Cerrados y Rechazados</button>
    </div>
	</div>
</div>
<div id="modal_msj" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content panel-danger">
      <div class="modal-header panel-heading">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><strong>&iexcl;Atenci√≥n!</strong></h4>
      </div>
      <div class="modal-body">
        <p id="txt_msj"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" data-dismiss="modal">Aceptar</button>
      </div>
    </div>
  </div>
</div>
<script>
  var pieDataID = [
    {
      value: {cant_pendientes},
      color:"#b2d7b7",
      highlight: "#0c62ab",
      label: "Pendientes"
    },
    {
      value: {cant_activos},
      color:"#d0c7bb",
      highlight: "#0c62ab",
      label: "Activos"
    },
    {
      value: {cant_cerrados},
      color:"#afb7bb",
      highlight: "#0c62ab",
      label: "Cerrados"
    },
    {
      value: {cant_rechazados},
      color:"#cabbd4",
      highlight: "#0c62ab",
      label: "Rechazados"
    }
  ];
  var ctx = document.getElementById("chartPieID").getContext("2d");
  window.myPie = new Chart(ctx).Pie(pieDataID);	
</script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      $('#pendientes').DataTable( {
				 "aaSorting": [[ 1, "desc" ]],
         "iDisplayLength":5,
          "language": {
            "decimal":        ".",
            "emptyTable":     "No hay datos disponibles",
            "info":           "Mostrando _START_ al _END_ de _TOTAL_ registros",
            "infoEmpty":      "Mostrando 0 al 0 de 0 registros",
            "infoFiltered":   "(filtrados de _MAX_ registros totales)",
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     "Ver _MENU_ registros",
            "loadingRecords": "Cargando...",
            "processing":     "Procesando...",
            "search":         "Filtrar:",
            "zeroRecords":    "No se encontraron registros coincidentes",
            "paginate": {
                "first":      "Inicio",
                "last":       "Fin",
                "next":       "Siguiente",
                "previous":   "Anterior"
            },
            "aria": {
                "sortAscending":  ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            }
          }
      } );
    } );
</script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      $('#activos').DataTable( {
				 "aaSorting": [[ 1, "desc" ]],
         "iDisplayLength":5,
          "language": {
            "decimal":        ".",
            "emptyTable":     "No hay datos disponibles",
            "info":           "Mostrando _START_ al _END_ de _TOTAL_ registros",
            "infoEmpty":      "Mostrando 0 al 0 de 0 registros",
            "infoFiltered":   "(filtrados de _MAX_ registros totales)",
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     "Ver _MENU_ registros",
            "loadingRecords": "Cargando...",
            "processing":     "Procesando...",
            "search":         "Filtrar:",
            "zeroRecords":    "No se encontraron registros coincidentes",
            "paginate": {
                "first":      "Inicio",
                "last":       "Fin",
                "next":       "Siguiente",
                "previous":   "Anterior"
            },
            "aria": {
                "sortAscending":  ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            }
          }
      } );
    } );
</script>
<script>	
	$(window).on('load',function(){
		var msj = "{mensaje}";
		document.getElementById('txt_msj').innerHTML=msj;
		$('#modal_msj').modal("{display}");
	});
  
  function administrarForo(foro_id) {
    var path = '/{app_name}/foros/administrar_foro_ajax/' + foro_id;
    formulario_administrar = $.ajax({
        url: path,
        dataType: 'text',
        async: false
    }).responseText;
    
    document.getElementById('div_listados').style.display = 'none';
    document.getElementById('div_administrarforo').style.display = 'block';
    document.getElementById('div_administrarforo').innerHTML = formulario_administrar;
    
  }
  
  function volverAdministrar() {
    document.getElementById('div_listados').style.display = 'block';
    document.getElementById('div_administrarforo').style.display = 'none';
    document.getElementById('div_administrarforo').innerHTML = '';
    
  }
</script>