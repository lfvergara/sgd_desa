<script>
  function modalEliminar(archivo_id, estado_id) {
    document.getElementById("archivo_id").value = archivo_id;
    document.getElementById("estado_id").value = estado_id;
    $('#modal_msj').modal("show");
			return false;	
    }
</script>
<div class="container">
	<div class="starter-template">
		<div class="page-header"><h1>{titulo}</h1></div>

		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-success">
					<div class="panel-heading">
						<h4>Buscar por denominación de Ente</h4>
					</div>
					<div class="panel-body">
						<form class="form-horizontal" name="datos" method="post" action="/{app_name}/archivos/buscar">
							<div class="form-group">
								<div class="col-lg-10">
									<input type="text" class="form-control" id="palabra" name="palabra" placeholder="Denominación de Ente" style="text-transform:uppercase;" onkeyup="javascript:this.value=this.value.toUpperCase();" />
								</div>
								<div class="col-lg-2">
                  <input type="hidden" name="tipo_busqueda" value="1">
									<button type="submit" class="btn btn-primary">Buscar</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
      
      <!--
      <div class="col-md-6">
				<div class="panel panel-success">
					<div class="panel-heading">
						<h4>Buscar por estado y rango de fechas</h4>
					</div>
					<div class="panel-body">
						<form class="form-horizontal" name="datos" method="post" action="/{app_name}/archivos/buscar">
							<div class="form-group">
                <label for="fecha" class="col-lg-1 control-label">Estado</label>
                <div class="col-lg-10">
                  <select name="estado_id" id="estado_id" class="form-control" required aria-required="true">
                    {slt_sestado}
                  </select>
                </div>
              </div>
              <div class="form-group">
							  <label for="fecha" class="col-lg-1 control-label">Desde</label>
								<div class="col-lg-4">
									<input type="date" class="form-control" name="desde" id="desde" required="" />
								</div>
                <label for="fecha" class="col-lg-1 control-label">Hasta</label>
								<div class="col-lg-4">
									<input type="date" class="form-control" name="hasta" id="hasta" required="" />
								</div>                
                <div class="col-lg-2">
                  <input type="hidden" name="tipo_busqueda" value="2">
									<button type="submit" class="btn btn-primary">Buscar</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
      -->
      
		</div>

		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-info">
					<div class="panel-heading">
						<h4>Resultado de la búsqueda</h4>
					</div>
					<div class="panel-body">
						<table id="tabla" class="table table-striped table-hover ">
							<thead>
								<tr>
									<th>#</th>
									<th>Archivo</th>
									<th>Estado</th>
									<th>Fecha</th>
									<th>Comentario</th>
									<th>Archivo</th>
									<th>Ver</th>
								</tr>
							</thead>
							<tbody>
								<!--repetir-->
								<tr>
									<td>{archivo_id}</td>
									<td>{denominacion}</td>
									<td>{estado}</td>
									<td>{fecha}</td>
									<td>{comentario}</td>
									<td>
										<a class="btn btn-warning btn-xs {icono}" href="/{app_name}/archivos/leer/{archivo_id}/{seguimiento_id}" target="_blank">
											<i class="fa fa-file"></i>
										</a>
									</td>
									<td style=" width: 75px;">
										<a class="btn btn-primary btn-xs" href="/{app_name}/archivos/consultar/{archivo_id}/{estado_id}" style="margin-left: 5%;">
											<i class="fa fa-eye"></i>
										</a>
                    <a onClick="modalEliminar({archivo_id},{estado_id});" class="btn btn-danger btn-xs" style="display: {administrador}; float: left;">
                      <i class="fa fa-trash-o"></i>
                    </a>
									</td>
								</tr>
								<!--repetir-->
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div id="modal_msj" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content panel-danger">
      <div class="modal-header panel-heading">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><strong>&iexcl;Atención!</strong></h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" name="datos" method="post" action="/{app_name}/archivos/eliminar_pendiente">
          <div class="form-group">
            <div class="col-lg-12" style="margin-bottom: 2%;" align="right;">
              <textarea class="form-control" id="motivo" name="motivo" placeholder="Motivo" style="text-transform:uppercase;" onkeyup="javascript:this.value=this.value.toUpperCase();" /></textarea>
            </div>
            <div class="col-lg-12">
              <input type="hidden" id="archivo_id" name="archivo_id" value="{archivo_id}">
              <input type="hidden" id="estado_id" name="estado_id" value="{estado_id}">
              <button type="submit" class="btn btn-danger">Eliminar</button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" data-dismiss="modal">Aceptar</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      $('#tabla').DataTable( {
				 "aaSorting": [[ 3, "desc" ]],
         "iDisplayLength":10,
          "language": {
            "decimal":        ".",
            "emptyTable":     "No hay datos disponibles",
            "info":           "Mostrando _START_ al _END_ de _TOTAL_ registros",
            "infoEmpty":      "Mostrando 0 al 0 de 0 registros",
            "infoFiltered":   "(filtrados de _MAX_ registros totales)",
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     "Ver _MENU_ registros",
            "loadingRecords": "Cargando...",
            "processing":     "Procesando...",
            "search":         "Filtrar:",
            "zeroRecords":    "No se encontraron registros coincidentes",
            "paginate": {
                "first":      "Inicio",
                "last":       "Fin",
                "next":       "Siguiente",
                "previous":   "Anterior"
            },
            "aria": {
                "sortAscending":  ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            }
          }
      } );
    } );
</script>
